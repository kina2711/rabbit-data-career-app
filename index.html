<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>L·ªô Tr√¨nh & V√≤ng ƒê·ªùi Data AI (Mobile Optimized)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        da: { light: '#fff7ed', DEFAULT: '#ea580c', dark: '#9a3412', border: '#fed7aa' },
                        de: { light: '#f0f9ff', DEFAULT: '#0284c7', dark: '#075985', border: '#bae6fd' },
                        ds: { light: '#faf5ff', DEFAULT: '#9333ea', dark: '#6b21a8', border: '#e9d5ff' },
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
                        'glow': '0 0 15px rgba(14, 165, 233, 0.3)',
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; -webkit-tap-highlight-color: transparent; }
        
        /* ·∫®n scrollbar nh∆∞ng v·∫´n cu·ªôn ƒë∆∞·ª£c (cho mobile ƒë·∫πp h∆°n) */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }

        .tab-btn { position: relative; transition: all 0.3s ease; white-space: nowrap; }
        .tab-btn::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 0%; height: 2px; background-color: currentColor; transition: width 0.3s ease; }
        .tab-btn.active::after { width: 100%; }

        /* Timeline & Lifecycle Styles */
        .timeline-line::before { content: ''; position: absolute; top: 2rem; bottom: -2rem; left: 15px; width: 2px; background-color: #e2e8f0; z-index: 0; }
        .timeline-item:last-child .timeline-line::before { display: none; }
        
        .lifecycle-arrow::after { content: '‚Üí'; position: absolute; right: -20px; top: 50%; transform: translateY(-50%); color: #cbd5e1; font-size: 1.5rem; font-weight: 300; }
        .lifecycle-item:last-child .lifecycle-arrow::after { display: none; }
        @media (max-width: 768px) { .lifecycle-arrow::after { display: none; } } /* ·∫®n m≈©i t√™n tr√™n mobile ƒë·ªÉ ƒë·ª° r·ªëi */

        /* AI Chat Styles */
        .ai-response ul { list-style-type: disc; margin-left: 1.5rem; margin-top: 0.5rem; }
        .ai-response li { margin-bottom: 0.25rem; }
        .ai-response strong { color: #0f172a; font-weight: 700; }
        .typing-dot { animation: typing 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
    </style>
</head>
<body class="text-slate-700">

    <!-- Navbar -->
    <nav class="bg-white/95 backdrop-blur-md sticky top-0 z-50 border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <!-- Logo -->
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-slate-900 rounded-lg flex items-center justify-center text-white font-bold shadow-lg">D</div>
                    <span class="text-xl font-bold text-slate-900 tracking-tight">Data<span class="text-sky-600">Map</span></span>
                </div>

                <!-- Desktop Nav -->
                <div class="hidden md:flex space-x-6" id="nav-tabs-desktop"></div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-slate-600 hover:text-slate-900 p-2 focus:outline-none">
                        <svg id="menu-icon" class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                        <svg id="close-icon" class="w-7 h-7 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu Overlay -->
        <div id="mobile-menu" class="hidden md:hidden absolute top-16 left-0 w-full bg-white border-b border-slate-200 shadow-xl animate-fade-in">
            <div class="flex flex-col p-4 space-y-2" id="nav-tabs-mobile">
                <!-- Mobile tabs injected by JS -->
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-10 min-h-screen">
        <!-- Dynamic Content -->
        <div id="app-container" class="animate-fade-in pb-10"></div>
    </main>

    <!-- Footer -->
    <footer class="border-t border-slate-200 py-8 bg-white mt-auto">
        <div class="max-w-7xl mx-auto px-4 text-center text-slate-400 text-sm">
            <p>¬© 2025 Data Career Navigator. Mobile Optimized.</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- API & DATA STORE (Gi·ªØ nguy√™n nh∆∞ c≈©) ---
        async function callGeminiAPI(prompt) {
            try {
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: prompt })
                });
                if (!response.ok) throw new Error("L·ªói k·∫øt n·ªëi");
                const data = await response.json();
                return data.reply;
            } catch (error) {
                return "‚ö†Ô∏è L·ªói k·∫øt n·ªëi AI. Vui l√≤ng ki·ªÉm tra l·∫°i m·∫°ng.";
            }
        }

        const data = {
            overview: {
                roles: [
                    { id: 'DE', name: 'Data Engineer', color: 'de', icon: '‚öôÔ∏è', focus: 'H·∫° t·∫ßng & Pipeline', desc: 'X√¢y d·ª±ng ƒë∆∞·ªùng ·ªëng d·ªØ li·ªáu, ƒë·∫£m b·∫£o data s·∫°ch v√† s·∫µn s√†ng.' },
                    { id: 'DA', name: 'Data Analyst', color: 'da', icon: 'üìä', focus: 'Ph√¢n t√≠ch & B√°o c√°o', desc: 'Bi·∫øn s·ªë li·ªáu th√¥ th√†nh insights ƒë·ªÉ ra quy·∫øt ƒë·ªãnh kinh doanh.' },
                    { id: 'DS', name: 'Data Scientist', color: 'ds', icon: 'ü§ñ', focus: 'M√¥ h√¨nh h√≥a AI', desc: 'D√πng to√°n v√† thu·∫≠t to√°n ƒë·ªÉ d·ª± ƒëo√°n t∆∞∆°ng lai.' }
                ]
            },
            roadmap: {
                base: [
                    { title: 'To√°n & Th·ªëng k√™', items: ['ƒê·∫°i s·ªë tuy·∫øn t√≠nh', 'X√°c su·∫•t', 'Th·ªëng k√™'], icon: '‚àë' },
                    { title: 'Computer Science', items: ['SQL', 'Python', 'Git/Bash'], icon: 'üíª' },
                    { title: 'T∆∞ duy', items: ['Critical Thinking', 'Business Domain'], icon: 'üß†' }
                ],
                paths: {
                    DA: [{ stage: 'X·ª≠ l√Ω', content: 'Excel, SQL, Pandas' }, { stage: 'Tr·ª±c quan', content: 'PowerBI, Tableau' }, { stage: 'Ph√¢n t√≠ch', content: 'A/B Test, RFM' }],
                    DE: [{ stage: 'Coding', content: 'Python, Docker, Linux' }, { stage: 'Big Data', content: 'Spark, Kafka, Hadoop' }, { stage: 'Cloud', content: 'AWS, Airflow, dbt' }],
                    DS: [{ stage: 'ML', content: 'Sklearn, Regression' }, { stage: 'Deep Learning', content: 'PyTorch, NLP, CV' }, { stage: 'MLOps', content: 'Deploy Model, API' }]
                }
            },
            lifecycle: [
                { id: 'ingest', step: '01', title: 'Ingestion', role: 'DE', short: 'Thu th·∫≠p', desc: 'K√©o d·ªØ li·ªáu t·ª´ ngu·ªìn (API, Logs) v·ªÅ.', tech: [{name: 'Kafka', type:'Stream', pros:'Nhanh', cons:'Kh√≥'}, {name:'Airbyte', type:'EL', pros:'D·ªÖ', cons:'Resource'}], mindset: 'Reliability' },
                { id: 'store', step: '02', title: 'Storage', role: 'DE', short: 'L∆∞u tr·ªØ', desc: 'L∆∞u tr·ªØ th√¥ gi√° r·∫ª (Data Lake).', tech: [{name: 'S3', type:'Object', pros:'R·∫ª', cons:'Query ch·∫≠m'}, {name:'Snowflake', type:'DW', pros:'M·∫°nh', cons:'ƒê·∫Øt'}], mindset: 'Scalability' },
                { id: 'process', step: '03', title: 'Transform', role: 'DE', short: 'X·ª≠ l√Ω', desc: 'L√†m s·∫°ch v√† chu·∫©n h√≥a.', tech: [{name: 'Spark', type:'Compute', pros:'Big Data', cons:'T·ªën RAM'}, {name:'dbt', type:'SQL', pros:'Clean', cons:'C·∫ßn DW'}], mindset: 'Quality' },
                { id: 'analyze', step: '04', title: 'Analytics', role: 'DA', short: 'Ph√¢n t√≠ch', desc: 'T√¨m Insight v√† b√°o c√°o.', tech: [{name: 'PowerBI', type:'BI', pros:'Windows', cons:'DAX kh√≥'}, {name:'Tableau', type:'BI', pros:'ƒê·∫πp', cons:'ƒê·∫Øt'}], mindset: 'Actionable' },
                { id: 'predict', step: '05', title: 'AI & ML', role: 'DS', short: 'D·ª± b√°o', desc: 'Training m√¥ h√¨nh AI.', tech: [{name: 'Sklearn', type:'ML', pros:'Chu·∫©n', cons:'No GPU'}, {name:'PyTorch', type:'DL', pros:'M·∫°nh', cons:'Kh√≥'}], mindset: 'Experimentation' }
            ]
        };

        // --- STATE MANAGEMENT ---
        let state = { tab: 'overview', roadmapRole: 'DA', lifecycleStepIndex: 0, chatHistory: [], mobileMenuOpen: false };

        // --- MOBILE UI FUNCTIONS ---
        function toggleMobileMenu() {
            state.mobileMenuOpen = !state.mobileMenuOpen;
            const menu = document.getElementById('mobile-menu');
            const menuIcon = document.getElementById('menu-icon');
            const closeIcon = document.getElementById('close-icon');

            if (state.mobileMenuOpen) {
                menu.classList.remove('hidden');
                menuIcon.classList.add('hidden');
                closeIcon.classList.remove('hidden');
            } else {
                menu.classList.add('hidden');
                menuIcon.classList.remove('hidden');
                closeIcon.classList.add('hidden');
            }
        }

        function setTab(tabId) {
            state.tab = tabId;
            state.mobileMenuOpen = false; // Close menu on select
            document.getElementById('mobile-menu').classList.add('hidden');
            document.getElementById('menu-icon').classList.remove('hidden');
            document.getElementById('close-icon').classList.add('hidden');
            
            renderTabs();
            renderContent();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // --- RENDERERS ---

        function renderTabs() {
            const tabs = [
                { id: 'overview', label: 'T·ªïng Quan' }, { id: 'roadmap', label: 'L·ªô Tr√¨nh' },
                { id: 'lifecycle', label: 'V√≤ng ƒê·ªùi' }, { id: 'tools', label: 'C√¥ng C·ª•' }, { id: 'ai_mentor', label: 'AI Mentor ‚ú®' }
            ];
            
            // Desktop
            document.getElementById('nav-tabs-desktop').innerHTML = tabs.map(t => 
                `<button onclick="setTab('${t.id}')" class="tab-btn px-3 py-2 text-sm font-medium ${state.tab === t.id ? 'text-sky-600 active font-bold' : 'text-slate-500 hover:text-slate-700'}">${t.label}</button>`
            ).join('');

            // Mobile
            document.getElementById('nav-tabs-mobile').innerHTML = tabs.map(t => 
                `<button onclick="setTab('${t.id}')" class="w-full text-left px-4 py-3 rounded-lg text-base font-medium ${state.tab === t.id ? 'bg-sky-50 text-sky-700 font-bold' : 'text-slate-600 hover:bg-slate-50'}">${t.label}</button>`
            ).join('');
        }

        function renderContent() {
            const container = document.getElementById('app-container');
            container.innerHTML = '';

            // Header (Dynamic based on tab)
            let headerTitle = "Data Career Navigator";
            let headerDesc = "H∆∞·ªõng d·∫´n chi ti·∫øt t·ª´ Zero ƒë·∫øn Hero";
            
            if(state.tab === 'overview') { headerTitle = "T·ªïng Quan Ng√†nh"; headerDesc = "B·ª©c tranh to√†n c·∫£nh v·ªÅ 3 v·ªã tr√≠ c·ªët l√µi."; }
            else if(state.tab === 'roadmap') { headerTitle = "L·ªô Tr√¨nh H·ªçc"; headerDesc = "C√°c b∆∞·ªõc ƒëi c·ª• th·ªÉ cho t·ª´ng v·ªã tr√≠."; }
            else if(state.tab === 'lifecycle') { headerTitle = "V√≤ng ƒê·ªùi D·ªØ Li·ªáu"; headerDesc = "Quy tr√¨nh d·ªØ li·ªáu ch·∫£y trong doanh nghi·ªáp."; }
            else if(state.tab === 'ai_mentor') { headerTitle = "AI Mentor"; headerDesc = "H·ªèi ƒë√°p th√¥ng minh c√πng Gemini."; }

            container.innerHTML += `
                <div class="text-center mb-8">
                    <h1 class="text-2xl md:text-4xl font-extrabold text-slate-900 mb-2">${headerTitle}</h1>
                    <p class="text-slate-500 text-sm md:text-base">${headerDesc}</p>
                </div>
            `;

            if(state.tab === 'overview') renderOverview(container);
            else if(state.tab === 'roadmap') renderRoadmap(container);
            else if(state.tab === 'lifecycle') renderLifecycle(container);
            else if(state.tab === 'tools') renderTools(container);
            else if(state.tab === 'ai_mentor') renderAIMentor(container);
        }

        // 1. OVERVIEW
        function renderOverview(container) {
            container.innerHTML += `
                <div class="space-y-6">
                    <!-- Cards Stack on Mobile -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        ${data.overview.roles.map(r => `
                            <div class="bg-white rounded-xl p-5 border border-${r.color}-border shadow-sm flex flex-row md:flex-col gap-4 items-center md:items-start">
                                <div class="flex-shrink-0 w-12 h-12 rounded-lg bg-${r.color}-light text-${r.color}-DEFAULT flex items-center justify-center text-2xl">
                                    ${r.icon}
                                </div>
                                <div>
                                    <h3 class="text-lg font-bold text-slate-900">${r.name}</h3>
                                    <p class="text-xs font-bold text-${r.color}-DEFAULT uppercase mb-1">${r.focus}</p>
                                    <p class="text-slate-600 text-xs md:text-sm line-clamp-2 md:line-clamp-none">${r.desc}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <!-- Chart -->
                    <div class="bg-white rounded-xl p-4 border border-slate-100 shadow-sm">
                        <h3 class="text-base font-bold text-slate-800 mb-4 text-center">Bi·ªÉu ƒê·ªì K·ªπ NƒÉng</h3>
                        <div class="chart-container relative h-[300px] w-full">
                            <canvas id="skillRadarChart"></canvas>
                        </div>
                    </div>
                </div>`;
            setTimeout(initRadarChart, 50);
        }

        // 2. ROADMAP
        function renderRoadmap(container) {
            const path = data.roadmap.paths[state.roadmapRole];
            const roleColor = state.roadmapRole === 'DA' ? 'da' : (state.roadmapRole === 'DE' ? 'de' : 'ds');
            
            container.innerHTML += `
                <div class="flex flex-col gap-8">
                    <!-- Role Selector (Horizontal Scroll on Mobile) -->
                    <div class="flex overflow-x-auto gap-2 pb-2 scrollbar-hide">
                        ${['DA', 'DE', 'DS'].map(r => `
                            <button onclick="setRoadmapRole('${r}')" class="flex-shrink-0 px-6 py-2 rounded-full text-sm font-bold border transition-all ${state.roadmapRole === r ? (r === 'DA' ? 'bg-da text-white border-da' : (r === 'DE' ? 'bg-de text-white border-de' : 'bg-ds text-white border-ds')) : 'bg-white text-slate-500 border-slate-200'}">
                                ${r === 'DA' ? 'Data Analyst' : (r === 'DE' ? 'Data Engineer' : 'Data Scientist')}
                            </button>
                        `).join('')}
                    </div>

                    <!-- Base Knowledge (Collapsible on Mobile could be better, but stacking is fine) -->
                    <div class="bg-slate-900 text-white rounded-xl p-5 shadow-lg">
                        <h3 class="font-bold text-base mb-4 flex items-center gap-2">üèõÔ∏è N·ªÅn T·∫£ng Chung</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            ${data.roadmap.base.map(b => `
                                <div class="bg-slate-800/50 p-3 rounded-lg border border-slate-700">
                                    <div class="font-semibold text-sky-300 text-sm mb-1">${b.icon} ${b.title}</div>
                                    <p class="text-xs text-slate-300">${b.items.join(', ')}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Timeline -->
                    <div class="space-y-0 pl-2">
                        ${path.map((step, idx) => `
                            <div class="timeline-item relative flex gap-4 pb-10 timeline-line">
                                <div class="flex-shrink-0 w-8 h-8 rounded-full border-4 border-white bg-${roleColor}-DEFAULT text-white flex items-center justify-center text-xs font-bold shadow z-10 ring-2 ring-${roleColor}-light">
                                    ${idx + 1}
                                </div>
                                <div class="bg-white flex-1 p-4 rounded-xl border border-slate-100 shadow-sm -mt-1">
                                    <h4 class="font-bold text-slate-800 text-base mb-1">${step.stage}</h4>
                                    <p class="text-slate-600 text-sm">${step.content}</p>
                                </div>
                            </div>
                        `).join('')}
                         <div class="flex gap-4 items-center">
                            <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs">üèÅ</div>
                            <div class="text-slate-400 text-sm italic">Th·ª±c chi·∫øn d·ª± √°n...</div>
                        </div>
                    </div>
                </div>`;
        }

        // 3. LIFECYCLE
        function renderLifecycle(container) {
            const step = data.lifecycle[state.lifecycleStepIndex];
            const roleColorMap = { 'DE': 'sky', 'DA': 'orange', 'DS': 'purple' };
            const currentColor = roleColorMap[step.role];
            
            container.innerHTML += `
                <div class="space-y-6">
                    <!-- Steps (Horizontal Scrollable) -->
                    <div class="relative">
                        <div class="overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide flex gap-3 snap-x">
                            ${data.lifecycle.map((s, idx) => `
                                <div onclick="setLifecycleIndex(${idx})" class="snap-center flex-shrink-0 w-24 flex flex-col items-center gap-2 cursor-pointer group">
                                    <div class="w-12 h-12 rounded-xl flex items-center justify-center font-bold border-2 transition-all ${idx === state.lifecycleStepIndex ? `bg-${roleColorMap[s.role]}-50 text-${roleColorMap[s.role]}-600 border-${roleColorMap[s.role]}-500 scale-110 shadow` : 'bg-white text-slate-300 border-slate-200'}">
                                        ${s.step}
                                    </div>
                                    <span class="text-[10px] font-bold uppercase ${idx === state.lifecycleStepIndex ? 'text-slate-800' : 'text-slate-400'}">${s.short}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="text-center text-xs text-slate-400 mt-[-10px] md:hidden">Vu·ªët ngang ƒë·ªÉ xem th√™m ‚Üî</div>
                    </div>

                    <!-- Details Card -->
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                        <div class="p-5 border-b border-slate-100 bg-slate-50">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="text-xl font-bold text-slate-800">${step.title}</h3>
                                    <span class="text-xs font-bold px-2 py-1 rounded bg-${currentColor}-100 text-${currentColor}-700 mt-1 inline-block">Role: ${step.role}</span>
                                </div>
                                <div class="text-3xl opacity-20">
                                    ${step.role === 'DE' ? '‚öôÔ∏è' : (step.role === 'DA' ? 'üìä' : 'ü§ñ')}
                                </div>
                            </div>
                            <p class="text-slate-600 text-sm mt-3">${step.desc}</p>
                        </div>
                        
                        <div class="p-5">
                            <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">üõ†Ô∏è Tech Stack</h4>
                            <div class="grid grid-cols-1 gap-3">
                                ${step.tech.map(t => `
                                    <div class="border border-slate-100 rounded-lg p-3 bg-white shadow-sm flex justify-between items-center">
                                        <div>
                                            <span class="font-bold text-slate-800 text-sm block">${t.name}</span>
                                            <span class="text-[10px] text-slate-500">${t.type}</span>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-[10px] text-green-600">‚úì ${t.pros}</div>
                                            <div class="text-[10px] text-red-500">‚úï ${t.cons}</div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="mt-4 p-3 bg-yellow-50 rounded-lg border border-yellow-100 text-xs text-yellow-800 italic">
                                üí° Mindset: "${step.mindset}"
                            </div>
                        </div>
                    </div>
                </div>`;
        }

        // 4. TOOLS
        function renderTools(container) {
            container.innerHTML += `
                <div class="flex flex-col gap-6">
                    <div class="bg-white rounded-xl p-5 border border-slate-200 shadow-sm">
                        <h3 class="font-bold text-lg mb-3">Data Storytelling</h3>
                        <ul class="space-y-3">
                            <li class="flex gap-3">
                                <span class="flex-shrink-0 w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xs font-bold">1</span>
                                <span class="text-sm text-slate-600"><strong>Context:</strong> Hi·ªÉu r√µ ng∆∞·ªùi nghe l√† ai.</span>
                            </li>
                            <li class="flex gap-3">
                                <span class="flex-shrink-0 w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xs font-bold">2</span>
                                <span class="text-sm text-slate-600"><strong>Narrative:</strong> K·ªÉ chuy·ªán c√≥ m·ªü ƒë·∫ßu, cao tr√†o.</span>
                            </li>
                            <li class="flex gap-3">
                                <span class="flex-shrink-0 w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xs font-bold">3</span>
                                <span class="text-sm text-slate-600"><strong>Visual:</strong> ƒê∆°n gi·∫£n, lo·∫°i b·ªè r√°c (clutter).</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="bg-white rounded-xl p-5 border border-slate-200 shadow-sm">
                        <h3 class="font-bold text-lg mb-3">So S√°nh Nhanh</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-sm font-semibold text-slate-700 mb-1">ETL vs ELT</div>
                                <div class="text-xs text-slate-500">ETL an to√†n h∆°n. ELT nhanh & hi·ªán ƒë·∫°i h∆°n (Cloud).</div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm font-semibold text-slate-700 mb-1">PowerBI vs Tableau</div>
                                <div class="text-xs text-slate-500">PowerBI r·∫ª, ph·ªï bi·∫øn. Tableau m·∫°nh v·ªÅ Visual.</div>
                            </div>
                        </div>
                    </div>
                </div>`;
        }

        // 5. AI MENTOR
        function renderAIMentor(container) {
            container.innerHTML += `
                <div class="flex flex-col h-[calc(100vh-220px)] md:h-[600px]">
                    <!-- Mobile Recommendations (Scrollable) -->
                    <div class="md:hidden flex overflow-x-auto gap-2 pb-4 scrollbar-hide">
                        <button onclick="triggerAIPrompt('L·ªô tr√¨nh DA cho ng∆∞·ªùi tr√°i ng√†nh?')" class="flex-shrink-0 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-full text-xs font-bold border border-indigo-100 whitespace-nowrap">üó∫Ô∏è L·ªô tr√¨nh tr√°i ng√†nh</button>
                        <button onclick="triggerAIPrompt('G·ª£i √Ω d·ª± √°n Portfolio cho DE?')" class="flex-shrink-0 px-4 py-2 bg-purple-50 text-purple-700 rounded-full text-xs font-bold border border-purple-100 whitespace-nowrap">üí° √ù t∆∞·ªüng D·ª± √°n</button>
                        <button onclick="triggerAIPrompt('Gi·∫£i th√≠ch Data Lake d·ªÖ hi·ªÉu?')" class="flex-shrink-0 px-4 py-2 bg-sky-50 text-sky-700 rounded-full text-xs font-bold border border-sky-100 whitespace-nowrap">ü§î Thu·∫≠t ng·ªØ</button>
                    </div>

                    <!-- Desktop Recommendations (Sidebar - Hidden on Mobile) -->
                    <div class="hidden md:grid grid-cols-3 gap-8 mb-4">
                        <div class="col-span-1 bg-indigo-600 text-white rounded-xl p-4">
                            <h3 class="font-bold mb-2">G·ª£i √Ω c√¢u h·ªèi</h3>
                            <ul class="text-sm space-y-2 text-indigo-100">
                                <li class="cursor-pointer hover:text-white" onclick="triggerAIPrompt('G·ª£i √Ω 3 d·ª± √°n Portfolio DA')">‚Ä¢ D·ª± √°n Portfolio</li>
                                <li class="cursor-pointer hover:text-white" onclick="triggerAIPrompt('So s√°nh SQL vs NoSQL')">‚Ä¢ So s√°nh c√¥ng ngh·ªá</li>
                            </ul>
                        </div>
                        <div class="col-span-2"></div>
                    </div>

                    <!-- Chat Area -->
                    <div class="flex-1 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col overflow-hidden">
                        <div id="ai-chat-box" class="flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50">
                            <div class="flex gap-2">
                                <div class="w-6 h-6 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex-shrink-0 flex items-center justify-center text-white text-[10px] font-bold">AI</div>
                                <div class="bg-white p-3 rounded-xl rounded-tl-none shadow-sm border border-slate-100 max-w-[90%] text-sm text-slate-700">
                                    Ch√†o b·∫°n! M√¨nh l√† AI Mentor. B·∫°n c·∫ßn gi√∫p g√¨ v·ªÅ ng√†nh Data?
                                </div>
                            </div>
                            ${state.chatHistory.map(msg => `
                                <div class="flex gap-2 ${msg.role === 'user' ? 'flex-row-reverse' : ''}">
                                    <div class="w-6 h-6 rounded-full ${msg.role === 'user' ? 'bg-slate-700' : 'bg-gradient-to-r from-indigo-500 to-purple-500'} flex-shrink-0 flex items-center justify-center text-white text-[10px] font-bold">
                                        ${msg.role === 'user' ? 'U' : 'AI'}
                                    </div>
                                    <div class="${msg.role === 'user' ? 'bg-slate-800 text-white' : 'bg-white text-slate-700 border border-slate-100'} p-3 rounded-xl ${msg.role === 'user' ? 'rounded-tr-none' : 'rounded-tl-none'} shadow-sm max-w-[90%] text-sm overflow-hidden">
                                        <div class="${msg.role === 'ai' ? 'ai-response' : ''}">${msg.content}</div>
                                    </div>
                                </div>
                            `).join('')}
                            <div id="ai-loading" class="hidden flex gap-2">
                                <div class="w-6 h-6 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center text-white text-[10px] font-bold">AI</div>
                                <div class="bg-white p-3 rounded-xl rounded-tl-none shadow-sm flex gap-1 items-center">
                                    <div class="w-1.5 h-1.5 bg-slate-400 rounded-full typing-dot"></div>
                                    <div class="w-1.5 h-1.5 bg-slate-400 rounded-full typing-dot"></div>
                                    <div class="w-1.5 h-1.5 bg-slate-400 rounded-full typing-dot"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Input -->
                        <div class="p-3 bg-white border-t border-slate-100">
                            <form onsubmit="handleAIChat(event)" class="flex gap-2">
                                <input id="ai-input" type="text" placeholder="Nh·∫≠p c√¢u h·ªèi..." class="flex-1 px-4 py-2.5 rounded-full border border-slate-200 focus:outline-none focus:border-indigo-500 text-sm bg-slate-50">
                                <button type="submit" class="w-10 h-10 bg-slate-900 text-white rounded-full flex items-center justify-center shadow hover:bg-slate-800 transition-colors">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>`;
            setTimeout(() => { const cb = document.getElementById('ai-chat-box'); if(cb) cb.scrollTop = cb.scrollHeight; }, 50);
        }

        // --- HANDLERS ---
        async function handleAIChat(e) {
            e.preventDefault();
            const input = document.getElementById('ai-input');
            const msg = input.value.trim();
            if (!msg) return;

            state.chatHistory.push({ role: 'user', content: msg });
            renderContent();
            
            document.getElementById('ai-loading').classList.remove('hidden');
            const aiText = await callGeminiAPI(msg);
            const fmt = aiText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\* (.*?)\n/g, '<li>$1</li>').replace(/\n/g, '<br>');
            
            state.chatHistory.push({ role: 'ai', content: fmt });
            renderContent();
        }

        window.triggerAIPrompt = (p) => { 
            state.chatHistory.push({ role: 'user', content: p });
            renderContent();
            handleAIChat({ preventDefault: () => { document.getElementById('ai-input').value = p; } }); 
        };
        
        window.setRoadmapRole = (r) => { state.roadmapRole = r; renderContent(); };
        window.setLifecycleIndex = (i) => { state.lifecycleStepIndex = i; renderContent(); };

        function initRadarChart() {
            const ctx = document.getElementById('skillRadarChart');
            if (!ctx) return;
            // Mobile adjustments for Chart
            const isMobile = window.innerWidth < 768;
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Coding', 'Math', 'Biz', 'SQL', 'AI', 'Ops'],
                    datasets: [
                        { label: 'DA', data: [30, 60, 90, 80, 20, 10], borderColor: '#ea580c', backgroundColor: 'rgba(234, 88, 12, 0.2)', borderWidth: 2 },
                        { label: 'DE', data: [90, 30, 40, 90, 20, 90], borderColor: '#0284c7', backgroundColor: 'rgba(2, 132, 199, 0.2)', borderWidth: 2 },
                        { label: 'DS', data: [70, 95, 60, 60, 95, 30], borderColor: '#9333ea', backgroundColor: 'rgba(147, 51, 234, 0.2)', borderWidth: 2 }
                    ]
                },
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false, 
                    scales: { 
                        r: { 
                            ticks: { display: false, max: 100 },
                            pointLabels: { font: { size: isMobile ? 10 : 12 } } // Smaller font on mobile
                        } 
                    },
                    plugins: { legend: { position: 'bottom', labels: { boxWidth: 10 } } }
                }
            });
        }

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            renderTabs();
            renderContent();
        });

    </script>
</body>
</html>
