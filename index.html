<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·ªô Tr√¨nh & V√≤ng ƒê·ªùi Data AI Chuy√™n S√¢u</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        da: { light: '#fff7ed', DEFAULT: '#ea580c', dark: '#9a3412', border: '#fed7aa' },
                        de: { light: '#f0f9ff', DEFAULT: '#0284c7', dark: '#075985', border: '#bae6fd' },
                        ds: { light: '#faf5ff', DEFAULT: '#9333ea', dark: '#6b21a8', border: '#e9d5ff' },
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
                        'glow': '0 0 15px rgba(14, 165, 233, 0.3)',
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', system-ui, -apple-system, sans-serif; background-color: #f8fafc; }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
        .tab-btn { position: relative; transition: all 0.3s ease; }
        .tab-btn::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 0%; height: 2px; background-color: currentColor; transition: width 0.3s ease; }
        .tab-btn.active::after { width: 100%; }
        .timeline-line::before { content: ''; position: absolute; top: 2rem; bottom: -2rem; left: 15px; width: 2px; background-color: #e2e8f0; z-index: 0; }
        .timeline-item:last-child .timeline-line::before { display: none; }
        .lifecycle-arrow::after { content: '‚Üí'; position: absolute; right: -20px; top: 50%; transform: translateY(-50%); color: #cbd5e1; font-size: 1.5rem; font-weight: 300; }
        .lifecycle-item:last-child .lifecycle-arrow::after { display: none; }
        @media (max-width: 768px) { .lifecycle-arrow::after { content: '‚Üì'; right: 50%; top: auto; bottom: -25px; transform: translateX(50%); } }
        .ai-response ul { list-style-type: disc; margin-left: 1.5rem; margin-top: 0.5rem; }
        .ai-response li { margin-bottom: 0.25rem; }
        .ai-response strong { color: #0f172a; font-weight: 700; }
        .ai-response p { margin-bottom: 0.75rem; }
        .typing-dot { animation: typing 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
    </style>
</head>
<body class="text-slate-700">
    <nav class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-slate-900 rounded-lg flex items-center justify-center text-white font-bold">D</div>
                    <span class="text-xl font-bold text-slate-900 tracking-tight">Data<span class="text-sky-600">Map</span></span>
                </div>
                <div class="hidden md:flex space-x-8" id="nav-tabs"></div>
                <div class="md:hidden text-slate-500">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </div>
            </div>
        </div>
    </nav>
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 min-h-screen">
        <header class="text-center mb-12 animate-fade-in">
            <h1 class="text-3xl md:text-5xl font-extrabold text-slate-900 mb-4">T·ª´ <span class="text-transparent bg-clip-text bg-gradient-to-r from-sky-500 to-indigo-600">Zero</span> ƒë·∫øn <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-purple-600">Hero</span> ng√†nh Data</h1>
            <p class="text-slate-500 max-w-2xl mx-auto text-lg">B·∫£n ƒë·ªì t∆∞ duy to√†n di·ªán, k·∫øt n·ªëi k·ªπ nƒÉng, c√¥ng c·ª• v√† quy tr√¨nh th·ª±c t·∫ø.</p>
        </header>
        <div id="app-container" class="animate-fade-in"></div>
    </main>
    <footer class="border-t border-slate-200 mt-20 py-8 bg-white">
        <div class="max-w-7xl mx-auto px-4 text-center text-slate-400 text-sm">
            <p>¬© 2025 Data Career Navigator. Powered by Rabbit.</p>
        </div>
    </footer>
    <script>
        // --- API CALLING LOGIC (VERCEL PROXY) ---
        async function callGeminiAPI(prompt) {
            try {
                // G·ªçi t·ªõi Serverless Function c·ªßa Vercel t·∫°i /chat
                const response = await fetch('/chat.js', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: prompt })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || `L·ªói server: ${response.status}`);
                }
                
                const data = await response.json();
                return data.reply;
            } catch (error) {
                console.error("API Error:", error);
                return `‚ö†Ô∏è Kh√¥ng th·ªÉ k·∫øt n·ªëi v·ªõi AI Mentor. L·ªói: ${error.message}. (H√£y ƒë·∫£m b·∫£o b·∫°n ƒë√£ c·∫•u h√¨nh bi·∫øn m√¥i tr∆∞·ªùng GEMINI_API_KEY tr√™n Vercel).`;
            }
        }

        // --- DATA STORE & LOGIC ---
        const data = {
            overview: {
                roles: [
                    { id: 'DE', name: 'Data Engineer', color: 'de', icon: '‚öôÔ∏è', focus: 'H·∫° t·∫ßng & Pipeline', desc: 'Ng∆∞·ªùi v·∫≠n chuy·ªÉn d·ªØ li·ªáu. ƒê·∫£m b·∫£o d·ªØ li·ªáu s·∫°ch v√† tin c·∫≠y.' },
                    { id: 'DA', name: 'Data Analyst', color: 'da', icon: 'üìä', focus: 'Ph√¢n t√≠ch & B√°o c√°o', desc: 'Ng∆∞·ªùi k·ªÉ chuy·ªán. Bi·∫øn d·ªØ li·ªáu th√¥ th√†nh insights.' },
                    { id: 'DS', name: 'Data Scientist', color: 'ds', icon: 'ü§ñ', focus: 'M√¥ h√¨nh h√≥a', desc: 'Nh√† ti√™n tri. D√πng to√°n h·ªçc ƒë·ªÉ d·ª± ƒëo√°n t∆∞∆°ng lai.' }
                ]
            },
            roadmap: {
                base: [
                    { title: 'To√°n & Th·ªëng k√™', items: ['ƒê·∫°i s·ªë tuy·∫øn t√≠nh', 'Gi·∫£i t√≠ch', 'X√°c su·∫•t'], icon: '‚àë' },
                    { title: 'Computer Science', items: ['C·∫•u tr√∫c d·ªØ li·ªáu', 'SQL', 'Bash/Linux'], icon: 'üíª' },
                    { title: 'T∆∞ duy', items: ['Critical Thinking', 'Business Domain', 'Data Ethics'], icon: 'üß†' }
                ],
                paths: {
                    DA: [{ stage: 'X·ª≠ l√Ω', content: 'Excel, SQL, Python (Pandas)' }, { stage: 'Tr·ª±c quan h√≥a', content: 'PowerBI/Tableau, Storytelling' }, { stage: 'Ph√¢n t√≠ch', content: 'A/B Testing, Cohort, RFM' }],
                    DE: [{ stage: 'L·∫≠p tr√¨nh', content: 'Python/Java, Docker, Linux' }, { stage: 'Big Data', content: 'Hadoop, Spark, Warehouse' }, { stage: 'Orchestration', content: 'Airflow, dbt, CI/CD' }],
                    DS: [{ stage: 'ML', content: 'Scikit-learn, Feature Eng' }, { stage: 'Deep Learning', content: 'TensorFlow/PyTorch, NLP' }, { stage: 'MLOps', content: 'Deployment, Monitoring' }]
                }
            },
            lifecycle: [
                { id: 'ingest', step: '01', title: 'Ingestion', role: 'DE', short: 'Thu th·∫≠p', desc: 'ƒê∆∞a d·ªØ li·ªáu t·ª´ ngu·ªìn v·ªÅ h·ªá th·ªëng.', tech: [{name: 'Kafka', type:'Streaming', pros:'Real-time', cons:'Kh√≥'}, {name:'Airbyte', type:'EL', pros:'D·ªÖ d√πng', cons:'Resource'}], mindset: 'Reliability: D·ªØ li·ªáu c√≥ v·ªÅ ƒë·ªß kh√¥ng?' },
                { id: 'store', step: '02', title: 'Storage', role: 'DE', short: 'L∆∞u tr·ªØ', desc: 'L∆∞u d·ªØ li·ªáu th√¥ (Raw) gi√° r·∫ª.', tech: [{name: 'S3', type:'Object', pros:'R·∫ª', cons:'Query ch·∫≠m'}, {name:'HDFS', type:'DFS', pros:'Big Data', cons:'Ph·ª©c t·∫°p'}], mindset: 'Scalability: M·ªü r·ªông d·ªÖ kh√¥ng?' },
                { id: 'process', step: '03', title: 'Transform', role: 'DE', short: 'X·ª≠ l√Ω', desc: 'L√†m s·∫°ch v√† chuy·ªÉn ƒë·ªïi.', tech: [{name: 'Spark', type:'Compute', pros:'M·∫°nh', cons:'T·ªën RAM'}, {name:'dbt', type:'Transform', pros:'SQL-based', cons:'C·∫ßn DW'}], mindset: 'Quality: D·ªØ li·ªáu s·∫°ch l√† g√¨?' },
                { id: 'analyze', step: '04', title: 'Analytics', role: 'DA', short: 'Ph√¢n t√≠ch', desc: 'T√¨m Insight v√† b√°o c√°o.', tech: [{name: 'PowerBI', type:'BI', pros:'R·∫ª', cons:'H·ªçc DAX'}, {name:'Metabase', type:'BI', pros:'Free', cons:'Basic'}], mindset: 'Actionable: Ra quy·∫øt ƒë·ªãnh g√¨?' },
                { id: 'predict', step: '05', title: 'AI & ML', role: 'DS', short: 'D·ª± b√°o', desc: 'Training m√¥ h√¨nh d·ª± b√°o.', tech: [{name: 'Sklearn', type:'Lib', pros:'Chu·∫©n', cons:'No GPU'}, {name:'PyTorch', type:'DL', pros:'M·∫°nh', cons:'Kh√≥'}], mindset: 'Experimentation: Ch·∫•p nh·∫≠n th·ª≠ sai.' }
            ]
        };

        let state = { tab: 'overview', roadmapRole: 'DA', lifecycleStepIndex: 0, chatHistory: [] };

        function renderTabs() {
            const tabs = [
                { id: 'overview', label: 'T·ªïng Quan' }, { id: 'roadmap', label: 'L·ªô Tr√¨nh' },
                { id: 'lifecycle', label: 'V√≤ng ƒê·ªùi' }, { id: 'tools', label: 'C√¥ng C·ª•' }, { id: 'ai_mentor', label: 'AI Mentor ‚ú®' }
            ];
            document.getElementById('nav-tabs').innerHTML = tabs.map(t => `<button onclick="setTab('${t.id}')" class="tab-btn px-3 py-2 text-sm font-medium ${state.tab === t.id ? 'text-sky-600 active font-bold' : 'text-slate-500 hover:text-slate-700'}">${t.label}</button>`).join('');
        }

        function renderOverview() {
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">${data.overview.roles.map(r => `<div class="bg-white rounded-2xl p-6 border border-${r.color}-border shadow-soft hover:shadow-lg transition-all duration-300 group"><div class="w-12 h-12 rounded-xl bg-${r.color}-light text-${r.color}-DEFAULT flex items-center justify-center text-2xl mb-4 group-hover:scale-110 transition-transform">${r.icon}</div><h3 class="text-xl font-bold text-slate-900 mb-1">${r.name}</h3><p class="text-xs font-bold text-${r.color}-DEFAULT uppercase tracking-wider mb-3">${r.focus}</p><p class="text-slate-600 text-sm">${r.desc}</p></div>`).join('')}</div>
                <div class="bg-white rounded-2xl p-8 border border-slate-100 shadow-soft"><h3 class="text-lg font-bold text-slate-800 mb-6 text-center">K·ªπ NƒÉng</h3><div class="chart-container max-w-2xl mx-auto h-[350px]"><canvas id="skillRadarChart"></canvas></div></div>`;
            setTimeout(initRadarChart, 50);
        }

        function renderRoadmap() {
            const path = data.roadmap.paths[state.roadmapRole];
            const roleColor = state.roadmapRole === 'DA' ? 'da' : (state.roadmapRole === 'DE' ? 'de' : 'ds');
            document.getElementById('app-container').innerHTML = `
                <div class="flex flex-col lg:flex-row gap-8">
                    <div class="lg:w-1/3 space-y-6"><div class="bg-slate-900 text-white rounded-2xl p-6 shadow-lg"><h3 class="font-bold text-lg mb-4">üèõÔ∏è N·ªÅn T·∫£ng</h3><div class="space-y-4">${data.roadmap.base.map(b => `<div class="pl-4 border-l-2 border-slate-700"><div class="font-semibold text-sky-300 text-sm">${b.icon} ${b.title}</div><ul class="text-xs text-slate-300 space-y-1">${b.items.map(i => `<li>‚Ä¢ ${i}</li>`).join('')}</ul></div>`).join('')}</div></div></div>
                    <div class="lg:w-2/3">
                        <div class="flex bg-white p-1 rounded-xl shadow-sm border border-slate-200 mb-8 inline-flex">${['DA', 'DE', 'DS'].map(r => `<button onclick="setRoadmapRole('${r}')" class="px-6 py-2 rounded-lg text-sm font-bold transition-all ${state.roadmapRole === r ? (r === 'DA' ? 'bg-da text-white' : (r === 'DE' ? 'bg-de text-white' : 'bg-ds text-white')) : 'text-slate-500 hover:bg-slate-50'}">${r}</button>`).join('')}</div>
                        <div class="space-y-0 pl-2">${path.map((step, idx) => `<div class="timeline-item relative flex gap-6 pb-12 timeline-line group"><div class="flex-shrink-0 w-8 h-8 rounded-full border-4 border-white bg-${roleColor}-DEFAULT text-white flex items-center justify-center text-sm font-bold shadow z-10 ring-2 ring-${roleColor}-light group-hover:scale-110 transition-transform">${idx + 1}</div><div class="bg-white flex-1 p-5 rounded-xl border border-slate-100 shadow-sm hover:shadow-md transition-shadow -mt-2"><h4 class="font-bold text-slate-800 text-lg mb-2">${step.stage}</h4><p class="text-slate-600 text-sm">${step.content}</p></div></div>`).join('')}<div class="flex gap-6 items-center"><div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs">üèÅ</div><div class="text-slate-400 text-sm italic">Ti·∫øp t·ª•c h·ªçc h·ªèi...</div></div></div>
                    </div>
                </div>`;
        }

        function renderLifecycle() {
            const step = data.lifecycle[state.lifecycleStepIndex];
            const roleColorMap = { 'DE': 'sky', 'DA': 'orange', 'DS': 'purple' };
            const currentColor = roleColorMap[step.role];
            document.getElementById('app-container').innerHTML = `
                <div class="overflow-x-auto pb-6 -mx-4 px-4 scrollbar-hide"><div class="flex min-w-[800px] justify-between items-center px-4">${data.lifecycle.map((s, idx) => `<div class="lifecycle-item relative flex flex-col items-center flex-1 cursor-pointer group lifecycle-arrow" onclick="setLifecycleIndex(${idx})"><div class="w-14 h-14 rounded-2xl flex items-center justify-center text-lg font-bold border-2 transition-all duration-300 z-10 bg-white ${idx === state.lifecycleStepIndex ? `border-${roleColorMap[s.role]}-500 text-${roleColorMap[s.role]}-600 bg-${roleColorMap[s.role]}-50 shadow-glow scale-110` : 'border-slate-200 text-slate-300 hover:border-slate-300'}">${s.step}</div><span class="mt-3 text-xs font-bold uppercase tracking-wide ${idx === state.lifecycleStepIndex ? 'text-slate-800' : 'text-slate-400'}">${s.short}</span></div>`).join('')}</div></div>
                <div class="mt-4 bg-white rounded-2xl border border-slate-200 shadow-soft overflow-hidden animate-fade-in"><div class="flex flex-col md:flex-row"><div class="p-8 md:w-1/3 bg-slate-50 border-r border-slate-100"><h3 class="text-2xl font-bold text-slate-800 mb-2">${step.title}</h3><p class="text-slate-600 text-sm mb-6">${step.desc}</p><div class="bg-white p-4 rounded-xl border border-slate-200"><h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">üí° Mindset</h4><p class="text-slate-700 italic text-sm">"${step.mindset}"</p></div></div><div class="p-8 md:w-2/3"><h4 class="text-sm font-bold text-slate-800 mb-4">üõ†Ô∏è Tech Stack</h4><div class="grid grid-cols-1 sm:grid-cols-2 gap-4">${step.tech.map(t => `<div class="border border-slate-200 rounded-xl p-4 hover:border-${currentColor}-300 hover:bg-${currentColor}-50 transition-colors"><div class="flex justify-between items-start mb-2"><span class="font-bold text-slate-800">${t.name}</span><span class="text-[10px] px-2 py-0.5 bg-slate-100 rounded text-slate-500">${t.type}</span></div><div class="space-y-2 text-xs"><div class="flex gap-2"><span class="text-green-500">‚úì</span><span>${t.pros}</span></div><div class="flex gap-2"><span class="text-red-400">‚úï</span><span>${t.cons}</span></div></div></div>`).join('')}</div></div></div></div>`;
        }

        function renderTools() {
            document.getElementById('app-container').innerHTML = `<div class="grid md:grid-cols-2 gap-8"><div class="bg-white rounded-2xl p-6 border border-slate-200 shadow-soft"><h3 class="font-bold text-xl mb-4">Data Storytelling</h3><div class="space-y-4 text-sm text-slate-600"><p>1. <strong>Context:</strong> Bi·∫øt ng∆∞·ªùi nghe l√† ai.</p><p>2. <strong>Narrative:</strong> C√≥ m·ªü ƒë·∫ßu, cao tr√†o v√† k·∫øt lu·∫≠n.</p><p>3. <strong>Visual:</strong> ƒê∆°n gi·∫£n, t·∫≠p trung v√†o insight.</p></div></div><div class="bg-white rounded-2xl p-6 border border-slate-200 shadow-soft"><h3 class="font-bold text-xl mb-4">So S√°nh</h3><div class="space-y-4"><div class="text-sm"><strong>ETL vs ELT:</strong> ETL cho h·ªá th·ªëng c≈©/b·∫£o m·∫≠t. ELT cho Cloud/Modern Stack.</div><div class="text-sm"><strong>PowerBI vs Tableau:</strong> PowerBI r·∫ª, t√≠ch h·ª£p t·ªët Microsoft. Tableau ƒë·∫πp, linh ho·∫°t.</div></div></div></div>`;
        }

        function renderAIMentor() {
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 h-[600px]">
                    <div class="lg:col-span-1 space-y-4">
                        <div class="bg-gradient-to-br from-indigo-600 to-purple-700 text-white rounded-2xl p-6 shadow-lg">
                            <h3 class="text-xl font-bold mb-2">‚ú® AI Mentor</h3>
                            <p class="text-indigo-100 text-sm mb-4">H·ªèi v·ªÅ l·ªô tr√¨nh, d·ª± √°n Portfolio...</p>
                            <div class="space-y-2">
                                <button onclick="triggerAIPrompt('G·ª£i √Ω 3 d·ª± √°n Portfolio cho Data Analyst m·∫£ng E-commerce.')" class="w-full text-left px-4 py-3 bg-white/10 hover:bg-white/20 rounded-lg text-sm transition-colors border border-white/10">üí° G·ª£i √Ω D·ª± √°n DA</button>
                                <button onclick="triggerAIPrompt('So s√°nh Data Lake v√† Data Warehouse.')" class="w-full text-left px-4 py-3 bg-white/10 hover:bg-white/20 rounded-lg text-sm transition-colors border border-white/10">ü§î Lake vs Warehouse?</button>
                            </div>
                        </div>
                    </div>
                    <div class="lg:col-span-2 bg-white rounded-2xl border border-slate-200 shadow-soft flex flex-col overflow-hidden">
                        <div id="ai-chat-box" class="flex-1 overflow-y-auto p-6 space-y-4 bg-slate-50">
                            <div class="flex gap-3"><div class="w-8 h-8 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center text-white text-xs font-bold shadow">AI</div><div class="bg-white p-4 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 max-w-[85%]"><p class="text-sm text-slate-700">Ch√†o b·∫°n! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n h√¥m nay?</p></div></div>
                            ${state.chatHistory.map(msg => `<div class="flex gap-3 ${msg.role === 'user' ? 'flex-row-reverse' : ''}"><div class="w-8 h-8 rounded-full ${msg.role === 'user' ? 'bg-slate-700' : 'bg-gradient-to-r from-indigo-500 to-purple-500'} flex items-center justify-center text-white text-xs font-bold shadow">${msg.role === 'user' ? 'You' : 'AI'}</div><div class="${msg.role === 'user' ? 'bg-slate-800 text-white' : 'bg-white text-slate-700 border border-slate-100'} p-4 rounded-2xl ${msg.role === 'user' ? 'rounded-tr-none' : 'rounded-tl-none'} shadow-sm max-w-[85%]"><div class="text-sm ${msg.role === 'ai' ? 'ai-response' : ''}">${msg.content}</div></div></div>`).join('')}
                            <div id="ai-loading" class="hidden flex gap-3"><div class="w-8 h-8 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center text-white text-xs font-bold shadow">AI</div><div class="bg-white p-4 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 flex gap-1 items-center"><div class="w-2 h-2 bg-slate-400 rounded-full typing-dot"></div><div class="w-2 h-2 bg-slate-400 rounded-full typing-dot"></div><div class="w-2 h-2 bg-slate-400 rounded-full typing-dot"></div></div></div>
                        </div>
                        <div class="p-4 bg-white border-t border-slate-100">
                            <form onsubmit="handleAIChat(event)" class="flex gap-2"><input id="ai-input" type="text" placeholder="Nh·∫≠p c√¢u h·ªèi..." class="flex-1 px-4 py-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"><button type="submit" class="px-6 py-3 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold transition-colors">G·ª≠i</button></form>
                        </div>
                    </div>
                </div>`;
            setTimeout(() => { const cb = document.getElementById('ai-chat-box'); if(cb) cb.scrollTop = cb.scrollHeight; }, 50);
        }

        async function handleAIChat(e) {
            e.preventDefault();
            const input = document.getElementById('ai-input');
            const msg = input.value.trim();
            if (!msg) return;
            state.chatHistory.push({ role: 'user', content: msg });
            renderAIMentor();
            document.getElementById('ai-loading').classList.remove('hidden');
            const aiText = await callGeminiAPI(msg);
            const fmt = aiText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\* (.*?)\n/g, '<li>$1</li>').replace(/\n/g, '<br>');
            state.chatHistory.push({ role: 'ai', content: fmt });
            renderAIMentor();
        }

        window.triggerAIPrompt = (p) => { document.getElementById('ai-input').value = p; handleAIChat({ preventDefault: () => {} }); };
        window.setTab = (t) => { state.tab = t; renderTabs(); if(t==='overview') renderOverview(); else if(t==='roadmap') renderRoadmap(); else if(t==='lifecycle') renderLifecycle(); else if(t==='tools') renderTools(); else if(t==='ai_mentor') renderAIMentor(); };
        window.setRoadmapRole = (r) => { state.roadmapRole = r; setTab('roadmap'); };
        window.setLifecycleIndex = (i) => { state.lifecycleStepIndex = i; setTab('lifecycle'); };
        
        function initRadarChart() {
            const ctx = document.getElementById('skillRadarChart');
            if (!ctx) return;
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Coding', 'Math', 'Business', 'SQL', 'AI', 'Ops'],
                    datasets: [{ label: 'DA', data: [30, 60, 90, 80, 20, 10], borderColor: '#ea580c', backgroundColor: 'rgba(234, 88, 12, 0.2)' }, { label: 'DE', data: [90, 30, 40, 90, 20, 90], borderColor: '#0284c7', backgroundColor: 'rgba(2, 132, 199, 0.2)' }, { label: 'DS', data: [70, 95, 60, 60, 95, 30], borderColor: '#9333ea', backgroundColor: 'rgba(147, 51, 234, 0.2)' }]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { r: { ticks: { display: false, max: 100 } } } }
            });
        }
        document.addEventListener('DOMContentLoaded', () => setTab('overview'));
    </script>
</body>
</html>
